{"version":3,"file":"VCalendarInterval.js","names":["VCalendarIntervalEvent","useDate","computed","convertToUnit","genericComponent","getPrefixedEventHandlers","propsFactory","useRender","makeVCalendarIntervalProps","day","type","Object","default","dayIndex","Number","events","Array","intervalDivisions","intervalDuration","intervalHeight","intervalFormat","String","Function","intervalStart","VCalendarInterval","name","inheritAttrs","props","index","required","setup","_ref","attrs","emit","slots","adapter","interval","start","addMinutes","startOfDay","date","end","label","format","filter","e","allDay","isEqual","isWithinRange","map","first","last","_createVNode","_mergeProps","intervalTitle","value","some","intervalBody","event","intervalEvent","_ref2","height","margin","eventClass","_ref3"],"sources":["../../../src/labs/VCalendar/VCalendarInterval.tsx"],"sourcesContent":["// Styles\nimport './VCalendarInterval.sass'\n\n// Components\nimport { VCalendarIntervalEvent } from './VCalendarIntervalEvent'\n\n// Composables\nimport { useDate } from '@/composables/date'\n\n// Utilities\nimport { computed } from 'vue'\nimport { convertToUnit, genericComponent, getPrefixedEventHandlers, propsFactory, useRender } from '@/util'\n\ntype Interval = {\n  label: string\n  start: unknown\n  end: unknown\n  events: any[]\n}\n\nexport type VCalendarIntervalSlots = {\n  intervalBody: { interval: Interval }\n  intervalEvent: {\n    height: string\n    margin: string\n    eventClass: string\n    event: any\n    interval: Interval\n  }\n  intervalTitle: { interval: Interval }\n}\n\nexport const makeVCalendarIntervalProps = propsFactory({\n  day: {\n    type: Object,\n    default: () => ({}),\n  },\n  dayIndex: Number,\n  events: Array<any>,\n  intervalDivisions: {\n    type: Number,\n    default: 2,\n  },\n  intervalDuration: {\n    type: Number,\n    default: 60,\n  },\n  intervalHeight: {\n    type: Number,\n    default: 48,\n  },\n  intervalFormat: {\n    type: [String, Function],\n    default: 'fullTime12h',\n  },\n  intervalStart: {\n    type: Number,\n    default: 0,\n  },\n}, 'VCalendarInterval')\n\nexport const VCalendarInterval = genericComponent<VCalendarIntervalSlots>()({\n  name: 'VCalendarInterval',\n\n  inheritAttrs: false,\n\n  props: {\n    index: {\n      type: Number,\n      required: true,\n    },\n\n    ...makeVCalendarIntervalProps(),\n  },\n\n  setup (props, { attrs, emit, slots }) {\n    const adapter = useDate()\n    const interval = computed(() => {\n      const start = adapter.addMinutes(adapter.startOfDay(props.day.date), (props.intervalDuration * (props.index + props.intervalStart)))\n      const end = adapter.addMinutes(\n        adapter.startOfDay(props.day.date),\n        (props.intervalDuration * (props.index + props.intervalStart + 1)) - 1\n      )\n      return {\n        ...props.day,\n        label: adapter.format(start, 'fullTime24h'),\n        start,\n        end,\n        events: props.events\n          ? props.events\n            .filter(e => !e.allDay &&\n              (adapter.isEqual(start, e.start) ||\n              adapter.isWithinRange(e.start, [start, end]) ||\n              adapter.isWithinRange(start, [e.start, e.end]) ||\n              adapter.isEqual(end, e.end))\n            )\n            .map(e => {\n              return {\n                ...e,\n                first: adapter.isEqual(start, e.start) || adapter.isWithinRange(e.start, [start, end]),\n                last: adapter.isEqual(end, e.end) || adapter.isWithinRange(e.end, [start, end]),\n              }\n            })\n          : [],\n      }\n    })\n\n    useRender(() => {\n      return (\n        props.dayIndex === 0 ? (\n          <div class=\"v-calendar-day__row-with-label\" style={ `height: ${convertToUnit(props.intervalHeight)}` }>\n            <div\n              class=\"v-calendar-day__row-label\"\n              { ...getPrefixedEventHandlers(attrs, ':time', () => props) }\n            >\n              {\n                slots.intervalTitle?.({ interval: interval.value }) ?? (\n                  props.index\n                    ? props.intervalFormat\n                      ? typeof props.intervalFormat === 'string'\n                        ? adapter.format(interval.value.start, 'hours12h')\n                        : props.intervalFormat(interval.value)\n                      : interval.value.label\n                    : '12 AM'\n                )\n              }\n            </div>\n            <div class=\"v-calendar-day__row-hairline\"></div>\n            <div\n              class={['v-calendar-day__row-content', interval.value.events.some(e => !e.last)\n                ? 'v-calendar-day__row-content-through'\n                : '']}\n              { ...getPrefixedEventHandlers(attrs, ':interval', () => interval.value) }\n            >\n              {\n                slots.intervalBody?.({ interval: interval.value }) ?? (\n                  <div>\n                    {\n                      interval.value.events?.map(event => (\n                        <VCalendarIntervalEvent\n                          event={ event }\n                          interval={ interval.value }\n                          intervalDivisions={ props.intervalDivisions }\n                          intervalDuration={ props.intervalDuration }\n                          intervalHeight={ props.intervalHeight }\n                          { ...attrs }\n                        >\n                          {{\n                            ...(slots.intervalEvent ? {\n                              intervalEvent: ({ height, margin, eventClass, event, interval }) => (\n                                slots.intervalEvent?.({ height, margin, eventClass, event, interval })\n                              ),\n                            } : {}),\n                          }}\n                        </VCalendarIntervalEvent>\n                      ))\n                    }\n                  </div>\n                )\n              }\n            </div>\n          </div>\n        ) : (\n          <div\n            class=\"v-calendar-day__row-without-label\"\n            style={ `height: ${convertToUnit(props.intervalHeight)}` }\n          >\n            <div\n              class={['v-calendar-day__row-content', interval.value.events.some(e => !e.last)\n                ? 'v-calendar-day__row-content-through' : '']}\n              { ...getPrefixedEventHandlers(attrs, ':interval', () => interval.value) }\n            >\n              {\n                slots.intervalBody?.({ interval: interval.value }) ?? (\n                  interval.value.events?.map(event => (\n                    <VCalendarIntervalEvent\n                      event={ event }\n                      interval={ interval.value }\n                      intervalDivisions={ props.intervalDivisions }\n                      intervalDuration={ props.intervalDuration }\n                      intervalHeight={ props.intervalHeight }\n                      { ...attrs }\n                    >\n                      {{\n                        ...(slots.intervalEvent ? {\n                          intervalEvent: ({ height, margin, eventClass, event, interval }) => (\n                            slots.intervalEvent?.({ height, margin, eventClass, event, interval })\n                          ),\n                        } : {}),\n                      }}\n                    </VCalendarIntervalEvent>\n                  ))\n                )\n              }\n            </div>\n          </div>\n        )\n      )\n    })\n\n    return { interval }\n  },\n})\n\nexport type VCalendarInterval = InstanceType<typeof VCalendarInterval>\n"],"mappings":"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","ignoreList":[]}