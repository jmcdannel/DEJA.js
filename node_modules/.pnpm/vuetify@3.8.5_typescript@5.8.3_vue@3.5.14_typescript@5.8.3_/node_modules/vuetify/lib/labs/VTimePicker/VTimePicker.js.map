{"version":3,"file":"VTimePicker.js","names":["pad","VTimePickerClock","VTimePickerControls","makeVPickerProps","VPicker","useLocale","useProxiedModel","computed","onMounted","ref","watch","createRange","genericComponent","omit","propsFactory","useRender","rangeHours24","rangeHours12am","rangeHours12pm","map","v","range60","makeVTimePickerProps","allowedHours","Function","Array","allowedMinutes","allowedSeconds","ampmInTitle","Boolean","disabled","format","type","String","default","max","min","viewMode","modelValue","readonly","scrollable","useSeconds","title","VTimePicker","name","props","emits","val","setup","_ref","emit","slots","t","inputHour","inputMinute","inputSecond","lazyInputHour","lazyInputMinute","lazyInputSecond","period","controlsRef","clockRef","isAllowedHourCb","cb","includes","minHour","Number","split","maxHour","isAllowedMinuteCb","isHourAllowed","value","minMinute","maxMinute","minTime","maxTime","time","isAllowedSecondCb","isMinuteAllowed","minSecond","maxSecond","isAmPm","setInputData","genValue","emitValue","convert24to12","hour","convert12to24","Date","getHours","getMinutes","getSeconds","minute","second","trim","toLowerCase","match","parseInt","firstAllowed","allowedFn","range","first","find","length","setPeriod","newHour","onInput","onChange","emitChange","pickerProps","filterProps","timePickerControlsProps","timePickerClockProps","_createVNode","_mergeProps","undefined","class","style","header","actions"],"sources":["../../../src/labs/VTimePicker/VTimePicker.tsx"],"sourcesContent":["// Styles\nimport './VTimePicker.sass'\n\n// Components\nimport { pad } from './util'\nimport { VTimePickerClock } from './VTimePickerClock'\nimport { VTimePickerControls } from './VTimePickerControls'\nimport { makeVPickerProps, VPicker } from '@/labs/VPicker/VPicker'\n\n// Composables\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { createRange, genericComponent, omit, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VTimePickerViewMode } from './shared'\nimport type { VPickerSlots } from '@/labs/VPicker/VPicker'\n\ntype Period = 'am' | 'pm'\ntype AllowFunction = (val: number) => boolean\n\nconst rangeHours24 = createRange(24)\nconst rangeHours12am = createRange(12)\nconst rangeHours12pm = rangeHours12am.map(v => v + 12)\nconst range60 = createRange(60)\n\nexport type VTimePickerSlots = Omit<VPickerSlots, 'header'>\n\nexport const makeVTimePickerProps = propsFactory({\n  allowedHours: [Function, Array] as PropType<AllowFunction | number[]>,\n  allowedMinutes: [Function, Array] as PropType<AllowFunction | number[]>,\n  allowedSeconds: [Function, Array] as PropType<AllowFunction | number[]>,\n  ampmInTitle: Boolean,\n  disabled: Boolean,\n  format: {\n    type: String as PropType<'ampm' | '24hr'>,\n    default: 'ampm',\n  },\n  max: String,\n  min: String,\n  viewMode: {\n    type: String as PropType<VTimePickerViewMode>,\n    default: 'hour',\n  },\n  modelValue: null as any as PropType<any>,\n  readonly: Boolean,\n  scrollable: Boolean,\n  useSeconds: Boolean,\n  ...omit(makeVPickerProps({ title: '$vuetify.timePicker.title' }), ['landscape']),\n}, 'VTimePicker')\n\nexport const VTimePicker = genericComponent<VTimePickerSlots>()({\n  name: 'VTimePicker',\n\n  props: makeVTimePickerProps(),\n\n  emits: {\n    'update:hour': (val: number) => true,\n    'update:minute': (val: number) => true,\n    'update:period': (val: Period) => true,\n    'update:second': (val: number) => true,\n    'update:modelValue': (val: string) => true,\n    'update:viewMode': (val: VTimePickerViewMode) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const { t } = useLocale()\n    const inputHour = ref(null as number | null)\n    const inputMinute = ref(null as number | null)\n    const inputSecond = ref(null as number | null)\n    const lazyInputHour = ref(null as number | null)\n    const lazyInputMinute = ref(null as number | null)\n    const lazyInputSecond = ref(null as number | null)\n    const period = ref('am' as Period)\n    const viewMode = useProxiedModel(props, 'viewMode', 'hour')\n    const controlsRef = ref<VTimePickerControls | null>(null)\n    const clockRef = ref<VTimePickerClock | null>(null)\n\n    const isAllowedHourCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      if (props.allowedHours instanceof Array) {\n        cb = (val: number) => (props.allowedHours as number[]).includes(val)\n      } else {\n        cb = props.allowedHours as AllowFunction\n      }\n\n      if (!props.min && !props.max) return cb\n\n      const minHour = props.min ? Number(props.min.split(':')[0]) : 0\n      const maxHour = props.max ? Number(props.max.split(':')[0]) : 23\n\n      return (val: number) => {\n        return val >= Number(minHour) &&\n          val <= Number(maxHour) &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAllowedMinuteCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      const isHourAllowed = !isAllowedHourCb.value || inputHour.value === null || isAllowedHourCb.value(inputHour.value)\n      if (props.allowedMinutes instanceof Array) {\n        cb = (val: number) => (props.allowedMinutes as number[]).includes(val)\n      } else {\n        cb = props.allowedMinutes as AllowFunction\n      }\n\n      if (!props.min && !props.max) {\n        return isHourAllowed ? cb : () => false\n      }\n\n      const [minHour, minMinute] = props.min ? props.min.split(':').map(Number) : [0, 0]\n      const [maxHour, maxMinute] = props.max ? props.max.split(':').map(Number) : [23, 59]\n      const minTime = minHour * 60 + Number(minMinute)\n      const maxTime = maxHour * 60 + Number(maxMinute)\n\n      return (val: number) => {\n        const time = 60 * inputHour.value! + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isHourAllowed &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAllowedSecondCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      const isHourAllowed = !isAllowedHourCb.value || inputHour.value === null || isAllowedHourCb.value(inputHour.value)\n      const isMinuteAllowed = isHourAllowed &&\n        (!isAllowedMinuteCb.value ||\n          inputMinute.value === null ||\n          isAllowedMinuteCb.value(inputMinute.value)\n        )\n\n      if (props.allowedSeconds instanceof Array) {\n        cb = (val: number) => (props.allowedSeconds as number[]).includes(val)\n      } else {\n        cb = props.allowedSeconds as AllowFunction\n      }\n\n      if (!props.min && !props.max) {\n        return isMinuteAllowed ? cb : () => false\n      }\n\n      const [minHour, minMinute, minSecond] = props.min ? props.min.split(':').map(Number) : [0, 0, 0]\n      const [maxHour, maxMinute, maxSecond] = props.max ? props.max.split(':').map(Number) : [23, 59, 59]\n      const minTime = minHour * 3600 + minMinute * 60 + Number(minSecond || 0)\n      const maxTime = maxHour * 3600 + maxMinute * 60 + Number(maxSecond || 0)\n\n      return (val: number) => {\n        const time = 3600 * inputHour.value! + 60 * inputMinute.value! + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isMinuteAllowed &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAmPm = computed((): boolean => {\n      return props.format === 'ampm'\n    })\n\n    watch(() => props.modelValue, val => setInputData(val))\n\n    onMounted(() => {\n      setInputData(props.modelValue)\n    })\n\n    function genValue () {\n      if (inputHour.value != null && inputMinute.value != null && (!props.useSeconds || inputSecond.value != null)) {\n        return `${pad(inputHour.value)}:${pad(inputMinute.value)}` + (props.useSeconds ? `:${pad(inputSecond.value!)}` : '')\n      }\n\n      return null\n    }\n\n    function emitValue () {\n      const value = genValue()\n      if (value !== null) emit('update:modelValue', value)\n    }\n\n    function convert24to12 (hour: number) {\n      return hour ? ((hour - 1) % 12 + 1) : 12\n    }\n\n    function convert12to24 (hour: number, period: Period) {\n      return hour % 12 + (period === 'pm' ? 12 : 0)\n    }\n\n    function setInputData (value: string | null | Date) {\n      if (value == null || value === '') {\n        inputHour.value = null\n        inputMinute.value = null\n        inputSecond.value = null\n      } else if (value instanceof Date) {\n        inputHour.value = value.getHours()\n        inputMinute.value = value.getMinutes()\n        inputSecond.value = value.getSeconds()\n      } else {\n        const [hour, , minute, , second, period] = value.trim().toLowerCase().match(/^(\\d+):(\\d+)(:(\\d+))?([ap]m)?$/) || new Array(6)\n\n        inputHour.value = period ? convert12to24(parseInt(hour, 10), period as Period) : parseInt(hour, 10)\n        inputMinute.value = parseInt(minute, 10)\n        inputSecond.value = parseInt(second || 0, 10)\n      }\n\n      period.value = (inputHour.value == null || inputHour.value < 12) ? 'am' : 'pm'\n    }\n\n    function firstAllowed (type: VTimePickerViewMode, value: number) {\n      const allowedFn = type === 'hour' ? isAllowedHourCb.value : (type === 'minute' ? isAllowedMinuteCb.value : isAllowedSecondCb.value)\n      if (!allowedFn) return value\n\n      // TODO: clean up (Note from V2 code)\n      const range = type === 'minute'\n        ? range60\n        : (type === 'second'\n          ? range60\n          : (isAmPm.value\n            ? (value < 12\n              ? rangeHours12am\n              : rangeHours12pm)\n            : rangeHours24))\n      const first = range.find(v => allowedFn((v + value) % range.length + range[0]))\n      return ((first || 0) + value) % range.length + range[0]\n    }\n\n    function setPeriod (val: Period) {\n      period.value = val\n      if (inputHour.value != null) {\n        const newHour = inputHour.value! + (period.value === 'am' ? -12 : 12)\n        inputHour.value = firstAllowed('hour', newHour)\n      }\n      emit('update:period', val)\n      emitValue()\n      return true\n    }\n\n    function onInput (value: number) {\n      if (viewMode.value === 'hour') {\n        inputHour.value = isAmPm.value ? convert12to24(value, period.value) : value\n      } else if (viewMode.value === 'minute') {\n        inputMinute.value = value\n      } else {\n        inputSecond.value = value\n      }\n    }\n\n    function onChange (value: number) {\n      switch (viewMode.value || 'hour') {\n        case 'hour':\n          emit('update:hour', value)\n          break\n        case 'minute':\n          emit('update:minute', value)\n          break\n        case 'second':\n          emit('update:second', value)\n          break\n        default:\n          break\n      }\n\n      const emitChange = inputHour.value !== null && inputMinute.value !== null && (props.useSeconds ? inputSecond.value !== null : true)\n      if (viewMode.value === 'hour') {\n        viewMode.value = 'minute'\n      } else if (props.useSeconds && viewMode.value === 'minute') {\n        viewMode.value = 'second'\n      }\n\n      if (inputHour.value === lazyInputHour.value &&\n        inputMinute.value === lazyInputMinute.value &&\n        (!props.useSeconds || inputSecond.value === lazyInputSecond.value)\n      ) return\n\n      const time = genValue()\n      if (time === null) return\n\n      lazyInputHour.value = inputHour.value\n      lazyInputMinute.value = inputMinute.value\n      props.useSeconds && (lazyInputSecond.value = inputSecond.value)\n\n      emitChange && emitValue()\n    }\n\n    useRender(() => {\n      const pickerProps = VPicker.filterProps(props)\n      const timePickerControlsProps = VTimePickerControls.filterProps(props)\n      const timePickerClockProps = VTimePickerClock.filterProps(omit(props, ['format', 'modelValue', 'min', 'max']))\n\n      return (\n        <VPicker\n          { ...pickerProps }\n          color={ undefined }\n          class={[\n            'v-time-picker',\n            props.class,\n          ]}\n          style={ props.style }\n          v-slots={{\n            title: () => slots.title?.() ?? (\n              <div class=\"v-time-picker__title\">\n                { t(props.title) }\n              </div>\n            ),\n            header: () => (\n              <VTimePickerControls\n                { ...timePickerControlsProps }\n                ampm={ isAmPm.value || props.ampmInTitle }\n                ampmReadonly={ isAmPm.value && !props.ampmInTitle }\n                hour={ inputHour.value as number }\n                minute={ inputMinute.value as number }\n                period={ period.value }\n                second={ inputSecond.value as number }\n                viewMode={ viewMode.value }\n                onUpdate:period={ (val: Period) => setPeriod(val) }\n                onUpdate:viewMode={ (value: VTimePickerViewMode) => (viewMode.value = value) }\n                ref={ controlsRef }\n              />\n            ),\n            default: () => (\n              <VTimePickerClock\n                { ...timePickerClockProps }\n                allowedValues={\n                  viewMode.value === 'hour'\n                    ? isAllowedHourCb.value\n                    : (viewMode.value === 'minute'\n                      ? isAllowedMinuteCb.value\n                      : isAllowedSecondCb.value)\n                    }\n                double={ viewMode.value === 'hour' && !isAmPm.value }\n                format={ viewMode.value === 'hour'\n                  ? (isAmPm.value ? convert24to12 : (val: number) => val)\n                  : (val: number) => pad(val, 2)\n                }\n                max={ viewMode.value === 'hour' ? (isAmPm.value && period.value === 'am' ? 11 : 23) : 59 }\n                min={ viewMode.value === 'hour' && isAmPm.value && period.value === 'pm' ? 12 : 0 }\n                size={ 20 }\n                step={ viewMode.value === 'hour' ? 1 : 5 }\n                modelValue={ viewMode.value === 'hour'\n                  ? inputHour.value as number\n                  : (viewMode.value === 'minute'\n                    ? inputMinute.value as number\n                    : inputSecond.value as number)\n                }\n                onChange={ onChange }\n                onInput={ onInput }\n                ref={ clockRef }\n              />\n            ),\n            actions: slots.actions,\n          }}\n        />\n      )\n    })\n  },\n})\n\nexport type VTimePicker = InstanceType<typeof VTimePicker>\n"],"mappings":"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","ignoreList":[]}